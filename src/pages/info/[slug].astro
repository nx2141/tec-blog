---
import H1Title from "../../components/H1Title.astro";
import Prose from "../../components/Prose.astro";
import Layout from "../../layouts/Layout.astro";
import type { MarkdownInstance } from "astro";

export async function getStaticPaths() {
  const modules = import.meta.glob<
    MarkdownInstance<{ title: string; date: string }>
  >("../../contents/*.md");

  const paths = await Promise.all(
    Object.keys(modules).map(async (path) => {
      const slug = path.split("/").at(-1)!.replace(".md", "");
      const module = await modules[path]();
      return {
        params: { slug },
        props: { frontmatter: module.frontmatter, Content: module.Content },
      };
    })
  );

  return paths;
}

const { frontmatter, Content } = Astro.props;
---

<Layout>
  <article class="mx-auto">
    <H1Title jaTitle={frontmatter.title} isBorderStyle={true} />
    <p class="text-sm text-gray-500 mb-6">{frontmatter.date}</p>
    <Prose>
      <h1>試しに</h1>
      <p>試しにコンテンツを表示してみます。</p>
      <h2>試しに</h2>
      <p>試しにコンテンツを表示してみます。</p>
      <p>Markdownのコンテンツを表示してみます。</p>
      <p>以下のように表示されます。</p>
      <p>以下のように表示されます。</p>
      <p>以下のように表示されます。</p>
      <Content />
    </Prose>
  </article>
</Layout>
